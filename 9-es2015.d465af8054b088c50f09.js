(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{aGCp:function(t,e,i){"use strict";i.r(e),i.d(e,"TaskReportModule",(function(){return C}));var n=i("tyNb"),s=i("ofXK"),a=i("Mm0v"),o=i("LPYB"),r=i("OWtv"),b=i("XNiG"),c=i("jfZ1"),l=i("njyG"),d=i("fXoL"),g=i("7zfz"),h=i("JqCM"),m=i("VJ5I"),p=i("3Pt+"),u=i("eO1q"),f=i("arFO");const O=["reportForm"];function P(t,e){1&t&&(d.Pb(0,"span",42),d.Cc(1,"Low"),d.Ob())}function y(t,e){if(1&t){const t=d.Qb();d.Pb(0,"span",43),d.Wb("click",(function(){d.tc(t);const e=d.Yb().$implicit;return d.Yb().SweetConfirm(e,"update")})),d.Cc(1,"Pending"),d.Ob()}}function v(t,e){1&t&&(d.Pb(0,"span",44),d.Cc(1,"Medium"),d.Ob())}function D(t,e){1&t&&(d.Pb(0,"span",45),d.Cc(1,"High"),d.Ob())}function L(t,e){if(1&t){const t=d.Qb();d.Pb(0,"tr"),d.Pb(1,"td"),d.Cc(2),d.Ob(),d.Pb(3,"td"),d.Cc(4),d.Ob(),d.Pb(5,"td"),d.Cc(6),d.Ob(),d.Pb(7,"td",34),d.Cc(8),d.Zb(9,"date"),d.Ob(),d.Pb(10,"td",34),d.Cc(11),d.Zb(12,"date"),d.Ob(),d.Pb(13,"td",34),d.Ac(14,P,2,0,"span",35),d.Ac(15,y,2,0,"span",36),d.Ac(16,v,2,0,"span",37),d.Ac(17,D,2,0,"span",38),d.Ob(),d.Pb(18,"td",34),d.Pb(19,"div",39),d.Pb(20,"button",40),d.Wb("click",(function(){d.tc(t);const i=e.$implicit;return d.Yb().ViewTask(i)})),d.Kb(21,"i",41),d.Ob(),d.Ob(),d.Ob(),d.Ob()}if(2&t){const t=e.$implicit;d.yb(2),d.Dc(t.id),d.yb(2),d.Dc(t.message),d.yb(2),d.Dc(t.assigned_name),d.yb(2),d.Ec("",d.bc(9,9,t.created_on,"d-MMM-yyyy HH:mm")," "),d.yb(3),d.Ec("",d.bc(12,12,t.due_date,"d-MMM-yyyy HH:mm")," "),d.yb(3),d.fc("ngIf","3"==t.priority),d.yb(1),d.fc("ngIf","PFA"==t.status),d.yb(1),d.fc("ngIf","2"==t.priority),d.yb(1),d.fc("ngIf","1"==t.priority)}}const k=n.g.forChild([{path:"",component:(()=>{class t{constructor(t,e,i,n,s,a,o,r,c){this.commonMethodService=t,this.commonDataService=e,this.mastersService=i,this.el=n,this.router=s,this.primeNgMessageService=a,this.notificationService=o,this.spinner=r,this.cd=c,this.onDestroy=new b.a,this.dtOptions={},this.dtData=[],this.dtTrigger=new b.a}ngOnInit(){this.fromDate=null,this.toDate=null,this.selectedAssignee=null,this.selectedPriority=null,this.dtOptions={pagingType:"simple_numbers",pageLength:5},null==this.commonDataService.oClientConfigurationsFromJsonFile&&null!=localStorage.getItem("config")&&(this.commonDataService.oClientConfigurationsFromJsonFile=JSON.parse(localStorage.getItem("config"))),null==this.commonDataService.userList?null!=localStorage.getItem("userList")&&(this.assigneeList=JSON.parse(localStorage.getItem("userList"))):this.assigneeList=this.commonDataService.userList,null==this.commonDataService.priorityList?null!=localStorage.getItem("priorityList")&&(this.priorityList=JSON.parse(localStorage.getItem("priorityList"))):this.priorityList=this.commonDataService.priorityList}ngAfterViewInit(){this.dtTrigger.next(),this.LoadTaskList()}RouteToPage(t){"back"==t?this.router.navigate(["/home"]):"reshuffle"==t&&this.router.navigate(["/modify/reshuffle"])}LoadTaskList(){this.rerender(),null==this.commonDataService.taskList||void 0===this.commonDataService.taskList?null!=localStorage.getItem("taskList")&&(this.originalList=this.taskList=JSON.parse(localStorage.getItem("taskList"))):this.originalList=this.taskList=JSON.parse(JSON.stringify(this.commonDataService.taskList))}GetReportsList(){if(this.rerender(),this.taskList=this.originalList,null!=this.fromDate&&null!=this.toDate){for(var t=[],e=0;e<this.taskList.length;e++){var i=this.GetDate(this.taskList[e].due_date);this.fromDate<=i&&i<=this.toDate&&t.push(this.taskList[e])}this.taskList=t}null!=this.selectedAssignee&&(this.taskList=this.taskList.filter(t=>t.assigned_to==this.selectedAssignee.id)),null!=this.selectedPriority&&(this.taskList=this.taskList.filter(t=>t.priority==this.selectedPriority.id)),null==this.fromDate&&null==this.toDate&&null==this.selectedAssignee&&null==this.selectedPriority&&(this.taskList=JSON.parse(JSON.stringify(this.commonDataService.taskList)))}GetDate(t){var e=t.split(" ")[0],i=Number(e.split("-")[0]),n=Number(e.split("-")[1]),s=Number(e.split("-")[2]);return new Date(i,n-1,s)}ViewTask(t){this.commonDataService.redirectorPage="Report",this.commonDataService.itemToUpdateOrView=t,this.router.navigate(["/create"])}ResetForm(){this.reportForm.reset(),this.LoadTaskList()}rerender(){this.dtElement.dtInstance.then(t=>{t.destroy(),this.dtTrigger.next()})}ngOnDestroy(){this.onDestroy.next(),this.dtTrigger.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(d.Jb(c.b),d.Jb(c.a),d.Jb(c.c),d.Jb(d.l),d.Jb(n.c),d.Jb(g.g),d.Jb(c.d),d.Jb(h.b),d.Jb(d.h))},t.\u0275cmp=d.Db({type:t,selectors:[["app-report"]],viewQuery:function(t,e){var i;1&t&&(d.Gc(l.a,!0),d.Gc(O,!0)),2&t&&(d.qc(i=d.Xb())&&(e.dtElement=i.first),d.qc(i=d.Xb())&&(e.reportForm=i.first))},decls:75,vars:13,consts:[[1,"wrapper"],[1,"main-panel"],[1,"content"],[1,"page-inner"],[1,"row"],[1,"col-md-1"],[1,"col-sm-12","col-md-10"],[1,"card","mb-0"],[1,"card-header"],[1,"d-flex","align-items-center"],[1,"page-title"],["role","tablist",1,"nav","nav-pills","nav-default","nav-pills-no-bd","nav-sm","ml-auto"],["type","button",1,"btn","btn-primary","mr-1",3,"click"],[1,"card-body"],[1,"bg-grey2","p-3"],["reportForm","ngForm"],[1,"col-sm-12","col-md-6","col-lg-4"],[1,"form-group"],["dateFormat","dd-M-y","name","fromDate","placeholder","Select Start Date","name","fromDate","inputId","icon1","appendTo","body",3,"ngModel","showIcon","readonlyInput","ngModelChange"],["dateFormat","dd-M-y","name","toDate","name","toDate","placeholder","Select End Date","inputId","icon","placeholder","Select Assignee","appendTo","body",3,"ngModel","showIcon","minDate","ngModelChange"],["name","selectedAssignee","placeholder","Select Assignee","editable"," true","optionLabel","name",3,"options","ngModel","ngModelChange"],["name","selectedPriority","placeholder","Select Priority","editable","true","optionLabel","name",3,"options","ngModel","ngModelChange"],[1,"col-sm-6","col-md-4","col-lg-4"],["type","submit",1,"form-control","btn","btn-primary","text-white","mr-1",3,"click"],[1,"col-sm-6","col-md-2","col-lg-2"],["type","button",1,"form-control","btn","btn-primary","text-white",3,"click"],[1,"table-responsive"],["datatable","",1,"table","table-striped","table-bordered","table-sm","hover",3,"dtOptions","dtTrigger"],["width","5%"],["width","11%"],["width","11%",1,"text-center"],["width","8%",1,"text-center"],["width","3%",1,"text-center"],[4,"ngFor","ngForOf"],[1,"text-center"],["class","badge badge-success",4,"ngIf"],["class","badge badge-secondary handcursor",3,"click",4,"ngIf"],["class","badge badge-warning",4,"ngIf"],["class","badge badge-danger",4,"ngIf"],[1,"form-button-action"],["type","button","data-toggle","modal","data-target","#addDept","title","","data-original-title","Edit",1,"btn","btn-link","btn-primary","btn-lg",3,"click"],[1,"fa","fa-edit"],[1,"badge","badge-success"],[1,"badge","badge-secondary","handcursor",3,"click"],[1,"badge","badge-warning"],[1,"badge","badge-danger"]],template:function(t,e){1&t&&(d.Pb(0,"div",0),d.Kb(1,"app-header"),d.Pb(2,"div",1),d.Pb(3,"div",2),d.Pb(4,"div",3),d.Pb(5,"div",4),d.Kb(6,"div",5),d.Pb(7,"div",6),d.Pb(8,"div",7),d.Pb(9,"div",8),d.Pb(10,"div",9),d.Pb(11,"h4",10),d.Pb(12,"span"),d.Cc(13,"Task Report"),d.Ob(),d.Ob(),d.Pb(14,"ul",11),d.Pb(15,"button",12),d.Wb("click",(function(){return e.RouteToPage("back")})),d.Cc(16,"Back"),d.Ob(),d.Ob(),d.Ob(),d.Ob(),d.Pb(17,"div",13),d.Pb(18,"div",14),d.Pb(19,"form",null,15),d.Pb(21,"div",4),d.Pb(22,"div",16),d.Pb(23,"div",17),d.Pb(24,"label"),d.Cc(25,"Start Date"),d.Ob(),d.Pb(26,"p-calendar",18),d.Wb("ngModelChange",(function(t){return e.fromDate=t})),d.Ob(),d.Ob(),d.Ob(),d.Pb(27,"div",16),d.Pb(28,"div",17),d.Pb(29,"label"),d.Cc(30,"End Date"),d.Ob(),d.Pb(31,"p-calendar",19),d.Wb("ngModelChange",(function(t){return e.toDate=t})),d.Ob(),d.Ob(),d.Ob(),d.Pb(32,"div",16),d.Pb(33,"div",17),d.Pb(34,"label"),d.Cc(35,"Assignee"),d.Ob(),d.Pb(36,"p-dropdown",20),d.Wb("ngModelChange",(function(t){return e.selectedAssignee=t})),d.Ob(),d.Ob(),d.Ob(),d.Pb(37,"div",16),d.Pb(38,"div",17),d.Pb(39,"label"),d.Cc(40,"Priority"),d.Ob(),d.Pb(41,"p-dropdown",21),d.Wb("ngModelChange",(function(t){return e.selectedPriority=t})),d.Ob(),d.Ob(),d.Ob(),d.Pb(42,"div",22),d.Pb(43,"div",17),d.Pb(44,"label"),d.Cc(45,"\xa0"),d.Ob(),d.Pb(46,"button",23),d.Wb("click",(function(){return e.GetReportsList()})),d.Cc(47,"Generate"),d.Ob(),d.Ob(),d.Ob(),d.Pb(48,"div",24),d.Pb(49,"div",17),d.Pb(50,"label"),d.Cc(51,"\xa0"),d.Ob(),d.Pb(52,"button",25),d.Wb("click",(function(){return e.ResetForm()})),d.Cc(53,"Reset"),d.Ob(),d.Ob(),d.Ob(),d.Ob(),d.Ob(),d.Ob(),d.Pb(54,"div",26),d.Pb(55,"table",27),d.Pb(56,"thead"),d.Pb(57,"tr"),d.Pb(58,"th",28),d.Cc(59,"Id"),d.Ob(),d.Pb(60,"th"),d.Cc(61,"Task Description"),d.Ob(),d.Pb(62,"th",29),d.Cc(63,"Assigned To"),d.Ob(),d.Pb(64,"th",30),d.Cc(65,"Created On"),d.Ob(),d.Pb(66,"th",30),d.Cc(67,"Due Date"),d.Ob(),d.Pb(68,"th",31),d.Cc(69,"Prirotiy"),d.Ob(),d.Pb(70,"th",32),d.Cc(71,"View"),d.Ob(),d.Ob(),d.Ob(),d.Pb(72,"tbody"),d.Ac(73,L,22,15,"tr",33),d.Ob(),d.Ob(),d.Ob(),d.Ob(),d.Ob(),d.Ob(),d.Kb(74,"div",5),d.Ob(),d.Ob(),d.Ob(),d.Ob(),d.Ob()),2&t&&(d.yb(26),d.fc("ngModel",e.fromDate)("showIcon",!0)("readonlyInput",!0),d.yb(5),d.fc("ngModel",e.toDate)("showIcon",!0)("minDate",e.fromDate),d.yb(5),d.fc("options",e.assigneeList)("ngModel",e.selectedAssignee),d.yb(5),d.fc("options",e.priorityList)("ngModel",e.selectedPriority),d.yb(14),d.fc("dtOptions",e.dtOptions)("dtTrigger",e.dtTrigger),d.yb(18),d.fc("ngForOf",e.taskList))},directives:[m.a,p.k,p.f,p.g,u.a,p.e,p.h,f.a,l.a,s.k,s.l],pipes:[s.e],styles:[""]}),t})(),canActivate:[r.a]}]);let C=(()=>{class t{}return t.\u0275mod=d.Hb({type:t}),t.\u0275inj=d.Gb({factory:function(e){return new(e||t)},imports:[[s.c,a.a,k,o.a]]}),t})()}}]);